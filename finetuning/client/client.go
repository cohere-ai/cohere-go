// Code generated by Fern. DO NOT EDIT.

package client

import (
	context "context"
	v2 "github.com/cohere-ai/cohere-go/v2"
	core "github.com/cohere-ai/cohere-go/v2/core"
	finetuning "github.com/cohere-ai/cohere-go/v2/finetuning"
	internal "github.com/cohere-ai/cohere-go/v2/internal"
	option "github.com/cohere-ai/cohere-go/v2/option"
	os "os"
)

type Client struct {
	WithRawResponse *RawClient

	options *core.RequestOptions
	baseURL string
	caller  *internal.Caller
}

func NewClient(options *core.RequestOptions) *Client {
	if options.Token == "" {
		options.Token = os.Getenv("CO_API_KEY")
	}
	return &Client{
		WithRawResponse: NewRawClient(options),
		options:         options,
		baseURL:         options.BaseURL,
		caller: internal.NewCaller(
			&internal.CallerParams{
				Client:      options.HTTPClient,
				MaxAttempts: options.MaxAttempts,
			},
		),
	}
}

// Returns a list of fine-tuned models that the user has access to.
func (c *Client) ListFinetunedModels(
	ctx context.Context,
	request *v2.FinetuningListFinetunedModelsRequest,
	opts ...option.RequestOption,
) (*finetuning.ListFinetunedModelsResponse, error) {
	response, err := c.WithRawResponse.ListFinetunedModels(
		ctx,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Creates a new fine-tuned model. The model will be trained on the dataset specified in the request body. The training process may take some time, and the model will be available once the training is complete.
func (c *Client) CreateFinetunedModel(
	ctx context.Context,
	request *finetuning.FinetunedModel,
	opts ...option.RequestOption,
) (*finetuning.CreateFinetunedModelResponse, error) {
	response, err := c.WithRawResponse.CreateFinetunedModel(
		ctx,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Retrieve a fine-tuned model by its ID.
func (c *Client) GetFinetunedModel(
	ctx context.Context,
	// The fine-tuned model ID.
	id string,
	opts ...option.RequestOption,
) (*finetuning.GetFinetunedModelResponse, error) {
	response, err := c.WithRawResponse.GetFinetunedModel(
		ctx,
		id,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Deletes a fine-tuned model. The model will be removed from the system and will no longer be available for use.
// This operation is irreversible.
func (c *Client) DeleteFinetunedModel(
	ctx context.Context,
	// The fine-tuned model ID.
	id string,
	opts ...option.RequestOption,
) (finetuning.DeleteFinetunedModelResponse, error) {
	response, err := c.WithRawResponse.DeleteFinetunedModel(
		ctx,
		id,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Updates the fine-tuned model with the given ID. The model will be updated with the new settings and name provided in the request body.
func (c *Client) UpdateFinetunedModel(
	ctx context.Context,
	// FinetunedModel ID.
	id string,
	request *v2.FinetuningUpdateFinetunedModelRequest,
	opts ...option.RequestOption,
) (*finetuning.UpdateFinetunedModelResponse, error) {
	response, err := c.WithRawResponse.UpdateFinetunedModel(
		ctx,
		id,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Returns a list of events that occurred during the life-cycle of the fine-tuned model.
// The events are ordered by creation time, with the most recent event first.
// The list can be paginated using `page_size` and `page_token` parameters.
func (c *Client) ListEvents(
	ctx context.Context,
	// The parent fine-tuned model ID.
	finetunedModelId string,
	request *v2.FinetuningListEventsRequest,
	opts ...option.RequestOption,
) (*finetuning.ListEventsResponse, error) {
	response, err := c.WithRawResponse.ListEvents(
		ctx,
		finetunedModelId,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Returns a list of metrics measured during the training of a fine-tuned model.
// The metrics are ordered by step number, with the most recent step first.
// The list can be paginated using `page_size` and `page_token` parameters.
func (c *Client) ListTrainingStepMetrics(
	ctx context.Context,
	// The parent fine-tuned model ID.
	finetunedModelId string,
	request *v2.FinetuningListTrainingStepMetricsRequest,
	opts ...option.RequestOption,
) (*finetuning.ListTrainingStepMetricsResponse, error) {
	response, err := c.WithRawResponse.ListTrainingStepMetrics(
		ctx,
		finetunedModelId,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}
